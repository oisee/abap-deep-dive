# Патчи для исправления ошибок в главах

Этот каталог содержит патчи для исправления критических и важных ошибок, обнаруженных в процессе факт-чекинга книги ABAP Deep Dive.

## Структура каталога

```
patches/
├── apply_patches.py                    # Скрипт для применения патчей
├── README.md                          # Этот файл
├── PATCH_All_Chapters_Versioning.md   # Специальный патч для версий
├── PATCH_Ch9_Gateway_Critical_Fixes.md # Специальный патч для главы 9
├── PATCH_Ch12_Memory_Inspector_Fix.md  # Специальный патч для главы 12
├── chapter_1/                         # Патчи для главы 1
│   ├── 01_critical_fixes.patch
│   ├── 02_important_fixes.patch
│   └── 03_todo_additions.patch
├── chapter_2/ - chapter_7_1/          # Патчи для глав 2-7.1
│   ├── 01_critical_fixes.patch
│   └── 02_important_fixes.patch
└── reports/                           # Отчеты о применении патчей
```

## Использование

### Применить все патчи ко всем главам:
```bash
python patches/apply_patches.py
```

### Применить патчи к конкретной главе:
```bash
python patches/apply_patches.py 1  # Только глава 1
```

### Режим предпросмотра (без изменений):
```bash
python patches/apply_patches.py --dry-run
```

### Комбинирование опций:
```bash
python patches/apply_patches.py 2 --dry-run  # Предпросмотр для главы 2
```

## Формат патч-файлов

Каждый патч-файл содержит одно или несколько исправлений в следующем формате:

```
### Исправление N: Описание проблемы
- Файл: Имя файла главы
- Строка: Номер строки или диапазон
- Найти: Текст для поиска
- Заменить: Текст замены
- Причина: Объяснение необходимости исправления
```

## Приоритеты патчей

- **01_critical_fixes.patch** - Критические ошибки, которые могут ввести в заблуждение
- **02_important_fixes.patch** - Важные исправления для технической корректности
- **03_todo_additions.patch** - Добавления недостающего контента из TODO

## Резервное копирование

Скрипт автоматически создает резервные копии файлов перед применением патчей в каталоге `backup/`.

## Статус применения патчей

| Глава | Критические | Важные | TODO | Статус |
|-------|------------|--------|------|--------|
| 1 | ✅ | ✅ | ✅ | Готово |
| 2 | ✅ | ✅ | ❌ | Готово |
| 3 | ✅ | ✅ | ❌ | Готово |
| 4 | ✅ | ✅ | ❌ | Готово |
| 5 | ✅ | ✅ | ❌ | Готово |
| 6 | ✅ | ✅ | ❌ | Готово |
| 7 | ✅ | ✅ | ❌ | Готово |
| 7.1 | ✅ | ✅ | ❌ | Готово |
| 8-11 | ❌ | ❌ | ❌ | Ожидает |
| 9 | ✅ Gateway | ❌ | ❌ | Специальный |
| 12 | ✅ Memory Inspector | ❌ | ❌ | Специальный |
| All | ✅ Versioning | ❌ | ❌ | Специальный |

## Примечания

1. Патчи применяются последовательно в порядке нумерации файлов
2. Если патч не может быть применен (текст не найден), скрипт продолжит с предупреждением
3. После применения рекомендуется проверить результат и пересобрать PDF
4. Для отката используйте файлы из каталога backup/

## Следующие шаги

После применения патчей:
1. Проверьте изменения в файлах глав
2. Запустите сборку PDF: `make pdf-pdf-a5`
3. Проверьте корректность в готовом PDF
4. Commit изменения: `git add -A && git commit -m "Apply fact-check patches for chapters 1-3"`